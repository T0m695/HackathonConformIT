<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poser une question - TechnoPlast</title>
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <link rel="stylesheet" href="/static/css/ask-question.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <div>
                <a href="/" class="back-link">â† Retour au tableau de bord</a>
                <h1>ğŸ’¬ Posez votre question</h1>
            </div>
        </header>

        <div class="question-layout">
            <!-- Left sidebar: Chat history -->
            <aside class="chart-history-sidebar">
                <div class="history-header">
                    <h3>ğŸ“Š Historique des graphiques</h3>
                    <button class="history-clear-btn" onclick="clearChartHistory()" title="Effacer l'historique">
                        ğŸ—‘ï¸
                    </button>
                </div>
                <div class="chart-history-container" id="chartHistoryContainer">
                    <div class="history-empty">
                        <span class="empty-icon">ğŸ“Š</span>
                        <p>Aucun graphique dans l'historique</p>
                        <p class="empty-hint">Demandez une visualisation pour commencer!</p>
                    </div>
                </div>
            </aside>

            <!-- Main content area -->
            <div class="question-container">
                <div class="question-intro">
                    <h2>ğŸ‘‹ Bonjour!</h2>
                    <p>Je suis votre assistant IA spÃ©cialisÃ© dans la sÃ©curitÃ© industrielle. Posez-moi toutes vos questions concernant les Ã©vÃ©nements de sÃ©curitÃ©, les mesures correctives, et les incidents passÃ©s.</p>
                </div>

                <div class="chat-full-screen">
                    <div class="chat-messages" id="chatMessages">
                        <div class="message bot-message">
                            <div class="message-avatar">ğŸ¤–</div>
                            <div class="message-content">
                                Bonjour! Je suis votre assistant pour trouver des Ã©vÃ©nements de sÃ©curitÃ© et des mesures correctives. Comment puis-je vous aider aujourd'hui?
                            </div>
                        </div>
                    </div>
                    
                    <div class="chat-input-wrapper">
                        <div class="chat-input-container">
                            <textarea 
                                id="chatInput" 
                                placeholder="Posez votre question... ğŸ¤"
                                rows="3"
                                autocomplete="off"
                            ></textarea>
                            <button id="voiceButton" class="voice-btn" title="Dicter">ğŸ¤</button>
                            <button id="sendButton" class="send-btn">
                                <span class="btn-text">Envoyer</span>
                                <span class="btn-icon">ğŸ“¤</span>
                            </button>
                        </div>
                        <div class="voice-status" id="voiceStatus"></div>
                    </div>
                </div>

                <div class="suggestions-panel">
                    <h3>ğŸ’¡ Questions suggÃ©rÃ©es:</h3>
                    <div class="suggestion-grid">
                        <button class="suggestion-card">
                            <span class="suggestion-icon">ğŸ“Š</span>
                            <span class="suggestion-text">Graphique des Ã©vÃ©nements par catÃ©gorie depuis janvier 2023</span>
                        </button>
                        <button class="suggestion-card">
                            <span class="suggestion-icon">ğŸ“ˆ</span>
                            <span class="suggestion-text">Ã‰volution mensuelle des incidents sur les 6 derniers mois</span>
                        </button>
                        <button class="suggestion-card">
                            <span class="suggestion-icon">ğŸ¥§</span>
                            <span class="suggestion-text">Distribution par gravitÃ© pour l'annÃ©e 2024</span>
                        </button>
                        <button class="suggestion-card">
                            <span class="suggestion-icon">ğŸ’°</span>
                            <span class="suggestion-text">CoÃ»ts des mesures correctives entre 2022 et 2024</span>
                        </button>
                        <button class="suggestion-card">
                            <span class="suggestion-icon">ğŸ“</span>
                            <span class="suggestion-text">Ã‰vÃ©nements par lieu depuis le dÃ©but de l'annÃ©e</span>
                        </button>
                        <button class="suggestion-card">
                            <span class="suggestion-icon">ğŸ”</span>
                            <span class="suggestion-text">Quels sont les Ã©vÃ©nements des 3 derniers mois?</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/js/ask-question.js"></script>
</body>
</html>
